<script>
function openApp() {
    const schemeUrl = 'catchkash://';
    const fallbackUrl = 'https://www.baidu.com';
    const now = Date.now();
    let hasFocus = true;

    // 页面可见性 API，用于判断是否切换到 App
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            hasFocus = false; // 用户切换到 App
        }
    });

    // 尝试打开 App
    window.location = schemeUrl;

    // 设置延迟判断是否打开失败
    setTimeout(function() {
        if (hasFocus && Date.now() - now < 2000) {
            // 页面仍可见，说明 App 没打开
            window.location.href = fallbackUrl;
        }
    }, 1500);
}
</script>
